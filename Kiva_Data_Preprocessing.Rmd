---
title: "Data_Pre-Processing"
author: "Wisdom"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Importing relevant libraries
```{r}
library(tidyverse)
library(readxl)
```

Importing the data

```{r}
filepath = "C:\\Users\\User\\OneDrive\\NTU Documents\\Research Project - R Codes\\MSC Research\\KIVA_Africa.xlsx"
loan_data = read_excel(filepath)
loan_data
```

```{r}
glimpse(loan_data)
```

```{r reclassify variables}
loan_data <- loan_data %>% 
    mutate(across(c(STATUS, SECTOR, ACTIVITY, COUNTRY, DISBURSAL_CURRENCY,
                    CURRENCY_EXCHANGE, GENDER, REPAYMENT_INTERVAL), factor))
```

```{r selecting variables}
loan_data <- loan_data %>%
    select(ID, NAME, STATUS, LOAN_AMOUNT, ACTIVITY, SECTOR, COUNTRY,
           DISBURSAL_CURRENCY, CURRENCY_EXCHANGE, GENDER, REPAYMENT_INTERVAL)
```


Checking for missing values
```{r handling missing values}
sapply(loan_data, function(x) sum(is.na(x)))
loan_data <-  loan_data %>%
    mutate(levels(GENDER), levels = c(levels(GENDER), 'Unknown'))

loan_data %>%
    mutate(GENDER = replace_na(GENDER, 'Unknown'))
```
Reclassify variables

```{r}
loan_data
```

```{r}
levels(loan_data$GENDER)

```

